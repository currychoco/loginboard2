create table board_user(
no int primary key auto_increment,
name varchar(8) not null,
user_id varchar(11) not null unique,
password varchar(255) not null,
gender char(1) not null,
phone_number varchar(14) not null,
reg_date timestamp not null default now()
);

create table login_board(
id int primary key auto_increment,
title varchar(60) not null,
content text not null,
user_no int not null,
reg_date timestamp not null default now(),
mod_date timestamp null,
view_count int not null default 0,
foreign key(user_no) references board_user(no) on delete cascade
);

create table image (
id int primary key auto_increment,
board_id int not null,
original_name varchar(30) not null,
server_name varchar(255) not null,
path varchar(255) not null,
size int(8) not null,
foreign key(board_id) references login_board(id) on delete cascade
);

create table comment (
id int primary key auto_increment,
board_id int not null,
user_no int not null,
parent_id int null,
comment varchar(255) not null,
reg_date timestamp not null default now(),
mod_date timestamp null,
foreign key(board_id) references login_board(id) on delete cascade,
foreign key(user_no) references board_user(no) on delete cascade
);

create table category (
id int primary key auto_increment,
name varchar(20) not null unique,
parent_id int not null
);

alter table `board_user` add `admin` char(1) null;

alter table `login_board` add `category_id` int;
alter table `login_board` add foreign key(category_id) references `category`(`id`) on delete cascade;